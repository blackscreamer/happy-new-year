<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>New Year ‚Äî VS Code Terminal</title>
  <style>
    body {
      background: #1e1e1e;
      font-family: Consolas, "Courier New", monospace;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      color: #d4d4d4;
    }

    .terminal {
      background: #0c0c0c;
      border-radius: 8px;
      width: 90%;
      max-width: 760px;
      padding: 20px;
      box-shadow: 0 0 30px rgba(0,0,0,0.8);
    }

    .titlebar {
      color: #cccccc;
      margin-bottom: 12px;
      font-size: 14px;
    }

    .line { white-space: pre-wrap; margin-bottom: 6px; }

    .cursor::after {
      content: '‚ñà';
      animation: blink 1s infinite;
    }

    @keyframes blink {
      0%,50% { opacity: 1; }
      51%,100% { opacity: 0; }
    }

    /* VS Code‚Äìlike syntax colors */
    .keyword { color: #569cd6; }
    .string { color: #ce9178; }
    .comment { color: #6a9955; }
    .function { color: #dcdcaa; }

    .buttons {
      margin-top: 20px;
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }

    button {
      font-family: inherit;
      background: transparent;
      border: 1px solid #d4d4d4;
      color: #d4d4d4;
      padding: 6px 14px;
      cursor: pointer;
      border-radius: 4px;
    }

    button:hover {
      background: #d4d4d4;
      color: #000;
    }
  </style>
</head>
<body>
<div class="terminal">
  <div class="titlebar">VS Code ‚Äî proposal.js</div>
  <div id="output"></div>
  <div class="buttons" id="controls"></div>
</div>

<script>
const output = document.getElementById('output');
const controls = document.getElementById('controls');

let queue = [];
let typing = false;

function enqueue(text, isHTML = false) {
  queue.push({ text, isHTML });
  if (!typing) processQueue();
}

function processQueue() {
  if (queue.length === 0) {
    typing = false;
    return;
  }
  typing = true;
  const { text, isHTML } = queue.shift();
  const div = document.createElement('div');
  div.className = 'line cursor';
  output.appendChild(div);

  let i = 0;
  const plain = isHTML ? (() => {
    const t = document.createElement('div');
    t.innerHTML = text;
    return t.textContent;
  })() : text;

  function type() {
    if (i < plain.length) {
      div.textContent += plain.charAt(i++);
      setTimeout(type, 35);
    } else {
      div.classList.remove('cursor');
      if (isHTML) div.innerHTML = text;
      setTimeout(processQueue, 250);
    }
  }
  type();
}

function clearButtons() { controls.innerHTML = ''; }
function addButton(label, action) {
  const btn = document.createElement('button');
  btn.textContent = label;
  btn.onclick = action;
  controls.appendChild(btn);
}

function start() {
  clearButtons();
  enqueue('Minaaaaa, happy new yeeeaaar! üéÜ');
  enqueue('I hope this year brings you joy, success, and everything your heart is wishing for.');
  addButton('OK', chooseIntro);
}

function chooseIntro() {
  clearButtons();
  enqueue('Choose message length:');
  addButton('Short', shortIntro);
  addButton('Long', longIntro);
}

function shortIntro() {
  clearButtons();
  enqueue('So on this special day, it feels right to start the new year by writing a new version of us ‚Äî line by line.');
  addButton('OK', startCode);
}

function longIntro() {
  clearButtons();
  enqueue('From this message, you probably already know where this is heading‚Ä¶');
  enqueue('Five months of talking, every day, without feeling the time pass.');
  enqueue('As we say, ‚Äúm3ak gelbi merta7‚Äù. To me, Mina, you‚Äôre truly special.');
  enqueue('Today feels like the perfect moment to write a new code of us ‚Äî line by line.');
  addButton('OK', startCode);
}

function startCode() {
  clearButtons();
  const code = [
    '<span class="keyword">const</span> me = <span class="string">"Ready"</span>;',
    '<span class="keyword">let</span> you = <span class="string">"?"</span>; <span class="comment">// waiting for your input‚Ä¶</span>',
    '',
    '<span class="keyword">if</span> (you === <span class="string">"Ready"</span>) {',
    '  git.<span class="function">checkout</span>(<span class="string">"us-branch"</span>);',
    '  git.<span class="function">merge</span>(me, you);',
    '  git.<span class="function">commit</span>(<span class="string">"Initial commit: Us v1.0 üöÄ"</span>);',
    '} <span class="keyword">else</span> {',
    '  <span class="comment">// no pressure, I‚Äôm not going anywhere</span>',
    '  <span class="function">keepTalking</span>();',
    '}'
  ];
  code.forEach(line => enqueue(line, true));
  addButton('Push the code', pushCode);
  addButton('Shutdown system', shutdown);
}

function pushCode() {
  clearButtons();
  enqueue('> git commit successful ‚ù§Ô∏è');
  enqueue('> status: happily deployed');
}

function shutdown() {
  clearButtons();
  enqueue('> System shutting down‚Ä¶');
  enqueue('> keepTalking() still running ‚ò∫Ô∏è');
}

addButton('OK', start);
</script>
</body>
</html>
